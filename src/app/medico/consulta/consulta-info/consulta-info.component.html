<h2>Consulta</h2>

<label><b>Paciente:</b></label>
{{ consulta?.paciente.nome }}<br>

<label><b>Unidade de Saúde:</b></label>
{{ consulta?.unidadeSaude.nome }}<br><br>

<label><b>Data:</b></label>
{{ consulta?.data | date: 'dd/MM/yyyy' }}<br><br><br>

<label><b>Observação:</b></label>
{{ consulta?.observacao }}<br><br><br>

<div>
  <label><b>Sintomas</b></label><br><br>
  <table>
    <tr>
      <th><b>Sintoma</b></th>
      <th><b>Possui</b></th>
    </tr>
    <tr *ngFor="let sintoma of sintomas">
      <td>{{ sintoma?.sintoma.nome }}</td>
      <td>{{ sintoma?.possuiDescription }}</td>
    </tr>
  </table><br>

  <label><b>Prognósticos</b></label><br><br>
  <table>
    <tr>
      <th><b>Doença</b></th>
      <th><b>Percentual</b></th>
    </tr>
    <tr *ngFor="let prognostico of prognosticos">
      <td>
        <button type="button" id="prog-{{ prognostico?.id }}" class="option-btn" (click)="definePrognostico(prognostico)">
          {{ prognostico?.doenca.nome }}
        </button>
      </td>
      <td>
        <div class="percentual-div"
          [style.width.px]="prognostico.percentual * 2.5"
          [style.background-color]="prognostico.rgbColor"
          >&nbsp;</div>
        <div class="text-div">&nbsp;{{ prognostico?.percentual }}%</div>
      </td>
    </tr>
    <tr>
      <td>
        <button type="button" id="prog-none" class="option-btn" (click)="definePrognostico(null)">
          Nenhuma das opções
        </button>
      </td>
      <td>
        <select id="selection-doenca" [(ngModel)]="selectedPrognostico" [ngModelOptions]="{standalone: true}"
          style="display: none;">
          <option *ngFor="let doenca of novasDoencasOptions" value={{doenca.id}}>
            {{ doenca.nome }}
          </option>
        </select>
      </td>
    </tr>
  </table>
</div><br><br>

<label><b>Adicionar novos sintomas</b></label><br><br>
<label><b>Sintoma:&nbsp;</b></label>
<input type="text" [(ngModel)]="sintomaFilter"><br><br>

<div class="scroll-div">
  <div *ngFor="let item of novosSintomasOptions | filtersintoma:sintomaFilter">
    <input #checkbox *ngIf="verificaListaNovosSintomas(item.id); else notThere" type="checkbox" (click)="selecionaNovoSintoma(item, checkbox.checked)" checked/>
    <ng-template #notThere>
      <input #checkbox type="checkbox" (click)="selecionaNovoSintoma(item, checkbox.checked)"/>
    </ng-template>
    {{ item.nome }}
  </div>
</div><br><br>

<div style="display: inline;">
  <button type="button" class="btn btn-primary" (click)="proximoPassoConsulta(false)">
    ENCAMINHAR PARA EXAME
  </button>&nbsp;&nbsp;
  <button type="button" class="btn btn-primary" (click)="proximoPassoConsulta(true)">
    FINALIZAR CONSULTA
  </button>
</div>